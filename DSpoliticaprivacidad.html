
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Politica Privacidad</title>
	<link rel="stylesheet" type="text/css" href="ext/resources/css/ext-all.css" />
	

    <!-- GC -->   
 	<!-- LIBS -->
 	<script type="text/javascript" src="ext/adapter/ext/ext-base.js"></script>
 	<!-- ENDLIBS -->

  <script type="text/javascript" src="ext/ext-all.js"></script>	    
  <style type="text/css">
	html, body {
        font:normal 12px verdana;
        mBUGSin:0;
        padding:0;
        border:0 none;
        overflow:hidden;
        height:100%;
    }
	.x-panel-body p {
	    mBUGSin:5px;
	}
    .x-column-layout-ct .x-panel {
        mBUGSin-bottom:5px;
    }
    .x-column-layout-ct .x-panel-dd-spacer {
        mBUGSin-bottom:5px;
    }    
    </style> 
  <script type="text/javascript">
    Ext.onReady(function(){       
       var viewport = new Ext.Viewport({
            layout:'border',
            items:[{
                region:'center',
                mBUGSins:'0 0 0 0',
                layout:'column',
                autoScroll:true,
                items:[{
                    columnWidth:.99,                   
                    baseCls:'x-plain',
                    bodyStyle:'padding:5px 5 5px 5px',
                    items:[{
                        title: 'Bienvenido',
                      //  html: 'style="background: #81BEF7 url(img/Caratula.jpg) no-repeat center  top"'
						 html: '<table width="100%" height:"30%" border="0"> <tr><td width="280" ></td><td>' +
				                  '<img src="img/Caratula11.jpg" WIDTH="85%" height:"30%"/>'+
				                	'</td>' +				                	
				                	'<td width="280" ><td></tr></table>'
								                    }]
                }]
            }, new Ext.BoxComponent({
				            region: 'south',
				            id: 'PAcabecera',
				            height: 35, // tama√±o cabecera            
				            autoEl: {
				                tag: 'div',
                                html: '<table width="100%" border="0"> <tr><td style="font-family:Verdana, Arial, Helvetica, sans-serif; font-size:10px">' +
				                  '<strong>Copyright(c) 2025, Business logic S.R.L. - Technology INTECRUZ</strong>'+
				                	'</td><td>' +				                	
				                	'<td width="285"><img align="right" src="img/logo_intecruz2.png"></td></tr></table>'
				                
				            }
				        })]
        });
		storeMarcacion = new Ext.data.JsonStore({  
			 proxy: new Ext.data.HttpProxy({
					url: 'servicesAjax/DSListadoMarcacionMovilUltima.php'
					,timeout: 1000000
					,method: 'POST'
			}),
			root: 'data',   
			
			totalProperty: 'total',  		
			fields: ['idultima_marcacion_movil'],
			listeners: { 
						load: function(thisStore, record, ids) {
								//Ext.Msg.hide();	
								TraerMarcacionMovil(record[0].data.idultima_marcacion_movil);
							}
					}
			}); 
			storeMarcacion.load();
			//////actualizar marcacion movil
		var storeMarcacionMovil = new Ext.data.ArrayStore({// Ext.create('Ext.data.ArrayStore',{  
			fields: [ 
			   {name: 'idmarcacion'},
				{name: 'fecha_marcacion'},
				{name: 'latitud'},
				{name: 'longitud'},
				{name: 'idproposito'},
				{name: 'idtipo_marcacion'},
				{name: 'nombre_cliente'},
				{name: 'celular'}
			   
			],  
			id: 0
		});
		function TraerMarcacionMovil(idm)
		{
			 
			registros_movil = [];
			storeMarcacionMovil.loadData(registros_movil);
			storeDatosGrid = new Ext.data.JsonStore(
			{
				proxy: new Ext.data.HttpProxy({
					url: 'https://solucionesintecruz.com.bo/biometrico/apirest/marcacion.php'
					,timeout: 1000000
					,method: 'GET'
				}),
				root: 'data',  
				totalProperty: 'total',
				fields: ['idmarcacion', 'fecha_marcacion','latitud','longitud','idproposito','idtipo_marcacion','nombre_cliente','celular'],			
				listeners: { 		       
					load: function(thisStore, record, ids) 
					{  					
						var pos = 0;  
							
						for(i = 0; i<this.getCount();i++){
						 
							registro = new Array(13);
							dimension = registros_movil.length;
							
							registro[0] = record[i].data.idmarcacion;
							registro[1] = record[i].data.fecha_marcacion;
							registro[2] = record[i].data.latitud;
							registro[3] = record[i].data.longitud;
							registro[4] = record[i].data.idproposito;
							registro[5] = record[i].data.idtipo_marcacion;
							registro[6] = record[i].data.nombre_cliente;
							registro[7] = record[i].data.celular;
							
							registros_movil[dimension] = registro;
							
						}
						
						storeMarcacionMovil.loadData(registros_movil);
						var store = storeMarcacionMovil;
						var datosGrid_m = []; 
							var i=0;			
						store.each(function(rec){  					
								datosGrid_m.push(Ext.apply({id:rec.id},rec.data)); 
									i++;
							
						});  
						registrosGrid_m = Ext.encode(datosGrid_m);
						ActualizarMarcacionMovil(registrosGrid_m);
					}
				}
			});
			storeDatosGrid.load({params:{idmarcacion: idm}});
			
			
			
		}
		function ActualizarMarcacionMovil(registros)
		{
			
				Ext.Ajax.request({
				url:'servicesAjax/DSguardarMarcacionRegyster.php',
				timeout: 1000000,
				method:'POST',
				params:{registros:registros},
				success:desactivo,
				failures:no_desactivo
				});
			
				function desactivo(resp)
				{
						

				}
				function no_desactivo(resp)
				{
					 
				}
		}
		/////////////////////
    });
	</script>
	</head>
	<body>
		
	</body>
</html>